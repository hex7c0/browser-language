/*
 hex7c0 2014
 @license GPLv3
*/
var all={ab:"Abkhazian",af:"Afrikaans",an:"Aragonese",ar:"Arabic",as:"Assamese",az:"Azerbaijani",be:"Belarusian",bg:"Bulgarian",bn:"Bengali",bo:"Tibetan",br:"Breton",bs:"Bosnian",ca:"Catalan",ce:"Chechen",co:"Corsican",cs:"Czech",cu:"Church",cy:"Welsh",da:"Danish",de:"German",el:"Greek",en:"English",eo:"Esperanto",es:"Spanish",et:"Estonian",eu:"Basque",fa:"Persian",fi:"Finnish",fj:"Fijian",fo:"Faroese",fr:"French",fy:"Frisian",ga:"Irish",gd:"Gaelic",gl:"Galician",gv:"Manx",he:"Hebrew",hi:"Hindi",
hr:"Croatian",ht:"Haitian",hu:"Hungarian",hy:"Armenian",id:"Indonesian",is:"Icelandic",it:"Italian",ja:"Japanese",jv:"Javanese",ka:"Georgian",kg:"Kongo",ko:"Korean",ku:"Kurdish",kw:"Cornish",ky:"Kirghiz",la:"Latin",lb:"Luxembourgish",li:"Limburgan",ln:"Lingala",lt:"Lithuanian",lv:"Latvian",mg:"Malagasy",mk:"Macedonian",mn:"Mongolian",mo:"Moldavian",ms:"Malay",mt:"Maltese",my:"Burmese",nb:"Norwegian",ne:"Nepali",nl:"Dutch",nn:"Norwegian",no:"Norwegian",oc:"Occitan",pl:"Polish",pt:"Portuguese",rm:"Raeto-Romance",
ro:"Romanian",ru:"Russian",sc:"Sardinian",se:"Sami",sk:"Slovak",sl:"Slovenian",so:"Somali",sq:"Albanian",sr:"Serbian",sv:"Swedish",sw:"Swahili",tk:"Turkmen",tr:"Turkish",ty:"Tahitian",uk:"Ukrainian",ur:"Urdu",uz:"Uzbek",vi:"Vietnamese",vo:"Volapuk",yi:"Yiddish",zh:"Chinese"};function set(a,d,b,c){d.cookie(a.cookie,b,{domain:a.domain,path:a.path,maxAge:a.age,httpOnly:a.httpOnly,secure:a.secure,signed:c});return b}function end(a){try{return a()}catch(d){}}
module.exports=function(a){a=a||Object.create(null);var d=__dirname+"/lib/dictionary.js",b=a.dictionary||require(d).LANG,c={cookie:String(a.cookie||"lang"),domain:String(a.domain||""),path:String(a.path||"/"),age:Number(a.age)||31536E6,httpOnly:Boolean(a.httpOnly),secure:Boolean(a.secure)};void 0==b._default?b=require(d).LANG:all[b._default]||(console.error("language misconfigured"),b=require(d).LANG);process.env.lang=b._default;var g=b;return Boolean(a.signed)?function(a,b,h){void 0==a.signedCookies&&
(a.signedCookies={});if(void 0==a.signedCookies[c.cookie]){if(a.headers["accept-language"])for(var f=a.headers["accept-language"].match(/([a-z]{2,2})/ig).filter(function(a,c,b){return b.indexOf(a.toLowerCase())==c}),e=0,d=f.length;e<d;e++)if(g[f[e]])return a.signedCookies[c.cookie]=set(c,b,f[e],!0),end(h)}else if(g[a.signedCookies[c.cookie]])return end(h);a.signedCookies[c.cookie]=set(c,b,g._default,!0);return end(h)}:function(a,b,d){void 0==a.cookies&&(a.cookies={});if(void 0==a.cookies[c.cookie]){if(a.headers["accept-language"])for(var f=
a.headers["accept-language"].match(/([a-z]{2,2})/ig).filter(function(a,b,c){return c.indexOf(a.toLowerCase())==b}),e=0,k=f.length;e<k;e++)if(g[f[e]])return a.cookies[c.cookie]=set(c,b,f[e],!1),end(d)}else if(g[a.cookies[c.cookie]])return end(d);a.cookies[c.cookie]=set(c,b,g._default,!1);return end(d)}};
